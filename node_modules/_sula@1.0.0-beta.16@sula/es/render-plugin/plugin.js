import React from 'react';
import pick from 'lodash/pick';
import assign from 'lodash/assign';
import sula from '../core';
export function registerRenderPlugin(pluginName, extraPropsName) {
  return function wrapComponent(Component, needCtxAndConfig) {
    sula.renderType(pluginName, function (ctx) {
      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var props = config.props || {};
      var extraProps;

      if (extraPropsName && extraPropsName.length) {
        extraProps = pick(config, extraPropsName);
      }

      if (needCtxAndConfig) {
        extraProps = extraProps ? extraProps : {};
        extraProps.ctx = ctx;
        extraProps.config = config;
      }

      return React.createElement(Component, extraProps ? assign(extraProps, props) : props);
    });
  };
}