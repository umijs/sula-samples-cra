{"ast":null,"code":"import \"antd/es/col/style\";\nimport _Col from \"antd/es/col\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nimport React from 'react';\nimport isUndefined from 'lodash/isUndefined';\nimport uniqueId from 'lodash/uniqueId';\nimport omit from 'lodash/omit';\nimport assign from 'lodash/assign';\nimport { toArray, assignWithDefined } from '../_util/common';\nimport FieldGroupContext, { HOOK_MARK } from './FieldGroupContext';\nimport { triggerFieldPlugin, triggerActionPlugin, triggerRenderPlugin, triggerPlugin } from '../rope/triggerPlugin';\nimport { needWrapCols } from './utils/layoutUtil';\nvar FormItem = _Form.Item;\n\nvar Field = /*#__PURE__*/function (_React$Component) {\n  _inherits(Field, _React$Component);\n\n  var _super = _createSuper(Field);\n\n  function Field() {\n    var _this;\n\n    _classCallCheck(this, Field);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.inited = false;\n    _this.destroy = false;\n    _this.source = void 0;\n    _this.disabled = void 0;\n    _this.visible = void 0;\n    _this.collect = void 0;\n    _this.fieldName = void 0;\n    _this.cancelRegisterField = null;\n\n    _this.cancelRegister = function () {\n      if (_this.cancelRegisterField) {\n        _this.cancelRegisterField();\n      }\n\n      _this.cancelRegisterField = null;\n    };\n\n    _this.initFieldSource = function (ctx) {\n      if (_this.props.remoteSource && _this.props.remoteSource.init !== false) {\n        triggerActionPlugin(ctx, _this.props.remoteSource).then(function (data) {\n          ctx.form.setFieldSource(_this.getName(), data);\n        });\n      }\n    };\n\n    _this.transChildrenToElems = function (ctx, children) {\n      var childrenElems = []; // 配置方式全部转换为组件\n\n      children.forEach(function (childConfig, index) {\n        var childKey = childConfig.name || \"\".concat(_this.fieldName, \"-child-\").concat(index);\n        var childElem;\n\n        if (childConfig.field) {\n          childElem = /*#__PURE__*/React.createElement(Field, _extends({}, childConfig, {\n            key: childKey\n          }));\n        } else if (childConfig.render) {\n          // 认为是render\n          var renderPlugin = childConfig.render;\n          var finalChildConfig = omit(childConfig, ['render']);\n          childElem = /*#__PURE__*/React.createElement(Field, _extends({\n            key: childKey\n          }, finalChildConfig), triggerRenderPlugin(ctx, renderPlugin));\n        }\n\n        childrenElems.push(childElem);\n      });\n      return childrenElems;\n    };\n\n    return _this;\n  }\n\n  _createClass(Field, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$context$formCon = this.context.formContext.getInternalHooks(HOOK_MARK),\n          registerField = _this$context$formCon.registerField,\n          getFormDependency = _this$context$formCon.getFormDependency,\n          getCtx = _this$context$formCon.getCtx;\n\n      this.initFieldSource(getCtx());\n      var parentGroupName = this.context.parentGroupName;\n      this.cancelRegisterField = registerField(parentGroupName, this);\n\n      if (!this.props.dependency) {\n        return;\n      } // field 依赖\n\n\n      var formDependency = getFormDependency();\n      formDependency.parseFormDependency(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelRegister();\n      this.destroy = true;\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      if (!isUndefined(this.props.name)) {\n        return toArray(this.props.name);\n      }\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource() {\n      return this.source;\n    }\n  }, {\n    key: \"getDisabled\",\n    value: function getDisabled() {\n      return this.disabled;\n    }\n  }, {\n    key: \"setSource\",\n    value: function setSource(source) {\n      this.source = source;\n      this.reRender();\n    }\n  }, {\n    key: \"setVisible\",\n    value: function setVisible(visible) {\n      this.visible = visible;\n      this.reRender();\n    }\n  }, {\n    key: \"setDisabled\",\n    value: function setDisabled(disabled) {\n      this.disabled = disabled;\n      this.reRender();\n    }\n  }, {\n    key: \"getVisible\",\n    value: function getVisible() {\n      return this.visible;\n    }\n  }, {\n    key: \"getCollect\",\n    value: function getCollect() {\n      return this.collect;\n    }\n  }, {\n    key: \"reRender\",\n    value: function reRender() {\n      if (this.destroy) return;\n      this.forceUpdate();\n    }\n    /**\n     *\n     */\n\n  }, {\n    key: \"renderField\",\n    value: function renderField(ctx, fieldConfig, extraConf) {\n      var itemLayout = extraConf.itemLayout,\n          visible = extraConf.visible,\n          childrenContainer = extraConf.childrenContainer,\n          formItemProps = extraConf.formItemProps;\n      var children = formItemProps.children,\n          _formItemProps$valueP = formItemProps.valuePropName,\n          valuePropName = _formItemProps$valueP === void 0 ? 'value' : _formItemProps$valueP;\n      var wrapperCol = itemLayout.wrapperCol,\n          labelCol = itemLayout.labelCol;\n      var fieldElem;\n\n      if (children) {\n        if (React.isValidElement(children)) {\n          fieldElem = children;\n        } else {\n          // 配置型children\n          fieldElem = this.transChildrenToElems(ctx, children);\n\n          if (childrenContainer) {\n            var childrenContainerElem = triggerRenderPlugin(ctx, childrenContainer);\n            fieldElem = React.cloneElement(childrenContainerElem, {\n              children: fieldElem\n            });\n          }\n        }\n      } else {\n        fieldElem = triggerFieldPlugin(ctx, fieldConfig, valuePropName);\n      }\n\n      var fieldItemElem = /*#__PURE__*/React.createElement(FormItem, _extends({\n        labelCol: labelCol,\n        wrapperCol: wrapperCol\n      }, formItemProps), fieldElem);\n\n      if (needWrapCols(itemLayout.span)) {\n        return /*#__PURE__*/React.createElement(_Col, {\n          style: {\n            display: visible === false ? 'none' : ''\n          },\n          span: itemLayout.span,\n          offset: itemLayout.offset\n        }, fieldItemElem);\n      } else {\n        return React.cloneElement(fieldItemElem, {\n          style: assign({}, fieldItemElem.props.style, {\n            display: visible === false ? 'none' : ''\n          })\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          fieldProps = _this$props.field,\n          initialSource = _this$props.initialSource,\n          initialVisible = _this$props.initialVisible,\n          initialDisabled = _this$props.initialDisabled,\n          collect = _this$props.collect,\n          remoteSource = _this$props.remoteSource,\n          itemLayout = _this$props.itemLayout,\n          childrenContainer = _this$props.childrenContainer,\n          restProps = _objectWithoutProperties(_this$props, [\"field\", \"initialSource\", \"initialVisible\", \"initialDisabled\", \"collect\", \"remoteSource\", \"itemLayout\", \"childrenContainer\"]);\n\n      if (!this.inited) {\n        this.inited = true;\n        this.fieldName = getFieldName(this.props.name);\n        this.collect = collect !== false;\n        this.source = initialSource;\n        this.visible = initialVisible;\n        this.disabled = initialDisabled;\n      }\n\n      var formItemProps = restProps;\n\n      if (restProps.rules && restProps.rules.length) {\n        formItemProps.rules = restProps.rules.map(function (rule) {\n          if (rule.validator) {\n            return {\n              validator: function validator(_, value) {\n                var validatorCtx = getCtx({\n                  value: value,\n                  name: _this2.props.name\n                });\n                return triggerPlugin('validator', validatorCtx, rule.validator);\n              }\n            };\n          }\n\n          return rule;\n        });\n      }\n\n      var _this$context = this.context,\n          formContext = _this$context.formContext,\n          layout = _this$context.layout;\n\n      var _formContext$getInter = formContext.getInternalHooks(HOOK_MARK),\n          getCtx = _formContext$getInter.getCtx;\n\n      var ctx = getCtx({\n        disabled: this.disabled,\n        source: this.source\n      });\n      var extraConfig = {\n        layout: layout,\n        itemLayout: assignWithDefined({}, this.context.itemLayout, itemLayout),\n        visible: this.visible,\n        childrenContainer: childrenContainer,\n        formItemProps: formItemProps\n      };\n      var fieldNode = this.renderField(ctx, fieldProps, extraConfig);\n      return fieldNode;\n    }\n  }]);\n\n  return Field;\n}(React.Component);\n\nField.contextType = FieldGroupContext;\nexport { Field as default };\n\nfunction getFieldName(fieldName) {\n  return fieldName || uniqueId('fieldName_');\n}","map":{"version":3,"sources":["/Users/x/workspace/xz8la8/open-sula/sula-samples-cra/node_modules/_sula@1.0.0-beta.16@sula/es/form/Field.js"],"names":["_Col","_Form","_typeof","obj","Symbol","iterator","constructor","prototype","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","i","Object","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","propertyIsEnumerable","call","sourceKeys","keys","_extends","assign","arguments","hasOwnProperty","apply","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","value","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","React","isUndefined","uniqueId","omit","toArray","assignWithDefined","FieldGroupContext","HOOK_MARK","triggerFieldPlugin","triggerActionPlugin","triggerRenderPlugin","triggerPlugin","needWrapCols","FormItem","Item","Field","_React$Component","_super","_this","_len","args","Array","_key","concat","inited","destroy","disabled","visible","collect","fieldName","cancelRegisterField","cancelRegister","initFieldSource","ctx","remoteSource","init","then","data","form","setFieldSource","getName","transChildrenToElems","children","childrenElems","forEach","childConfig","index","childKey","name","childElem","field","createElement","render","renderPlugin","finalChildConfig","push","componentDidMount","_this$context$formCon","context","formContext","getInternalHooks","registerField","getFormDependency","getCtx","parentGroupName","dependency","formDependency","parseFormDependency","componentWillUnmount","getSource","getDisabled","setSource","reRender","setVisible","setDisabled","getVisible","getCollect","forceUpdate","renderField","fieldConfig","extraConf","itemLayout","childrenContainer","formItemProps","_formItemProps$valueP","valuePropName","wrapperCol","labelCol","fieldElem","isValidElement","childrenContainerElem","cloneElement","fieldItemElem","span","style","display","offset","_this2","_this$props","fieldProps","initialSource","initialVisible","initialDisabled","restProps","getFieldName","rules","map","rule","validator","_","validatorCtx","_this$context","layout","_formContext$getInter","extraConfig","fieldNode","Component","contextType","default"],"mappings":"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","sourcesContent":["import \"antd/es/col/style\";\nimport _Col from \"antd/es/col\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React from 'react';\nimport isUndefined from 'lodash/isUndefined';\nimport uniqueId from 'lodash/uniqueId';\nimport omit from 'lodash/omit';\nimport assign from 'lodash/assign';\nimport { toArray, assignWithDefined } from '../_util/common';\nimport FieldGroupContext, { HOOK_MARK } from './FieldGroupContext';\nimport { triggerFieldPlugin, triggerActionPlugin, triggerRenderPlugin, triggerPlugin } from '../rope/triggerPlugin';\nimport { needWrapCols } from './utils/layoutUtil';\nvar FormItem = _Form.Item;\n\nvar Field = /*#__PURE__*/function (_React$Component) {\n  _inherits(Field, _React$Component);\n\n  var _super = _createSuper(Field);\n\n  function Field() {\n    var _this;\n\n    _classCallCheck(this, Field);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.inited = false;\n    _this.destroy = false;\n    _this.source = void 0;\n    _this.disabled = void 0;\n    _this.visible = void 0;\n    _this.collect = void 0;\n    _this.fieldName = void 0;\n    _this.cancelRegisterField = null;\n\n    _this.cancelRegister = function () {\n      if (_this.cancelRegisterField) {\n        _this.cancelRegisterField();\n      }\n\n      _this.cancelRegisterField = null;\n    };\n\n    _this.initFieldSource = function (ctx) {\n      if (_this.props.remoteSource && _this.props.remoteSource.init !== false) {\n        triggerActionPlugin(ctx, _this.props.remoteSource).then(function (data) {\n          ctx.form.setFieldSource(_this.getName(), data);\n        });\n      }\n    };\n\n    _this.transChildrenToElems = function (ctx, children) {\n      var childrenElems = []; // 配置方式全部转换为组件\n\n      children.forEach(function (childConfig, index) {\n        var childKey = childConfig.name || \"\".concat(_this.fieldName, \"-child-\").concat(index);\n        var childElem;\n\n        if (childConfig.field) {\n          childElem = /*#__PURE__*/React.createElement(Field, _extends({}, childConfig, {\n            key: childKey\n          }));\n        } else if (childConfig.render) {\n          // 认为是render\n          var renderPlugin = childConfig.render;\n          var finalChildConfig = omit(childConfig, ['render']);\n          childElem = /*#__PURE__*/React.createElement(Field, _extends({\n            key: childKey\n          }, finalChildConfig), triggerRenderPlugin(ctx, renderPlugin));\n        }\n\n        childrenElems.push(childElem);\n      });\n      return childrenElems;\n    };\n\n    return _this;\n  }\n\n  _createClass(Field, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$context$formCon = this.context.formContext.getInternalHooks(HOOK_MARK),\n          registerField = _this$context$formCon.registerField,\n          getFormDependency = _this$context$formCon.getFormDependency,\n          getCtx = _this$context$formCon.getCtx;\n\n      this.initFieldSource(getCtx());\n      var parentGroupName = this.context.parentGroupName;\n      this.cancelRegisterField = registerField(parentGroupName, this);\n\n      if (!this.props.dependency) {\n        return;\n      } // field 依赖\n\n\n      var formDependency = getFormDependency();\n      formDependency.parseFormDependency(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelRegister();\n      this.destroy = true;\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      if (!isUndefined(this.props.name)) {\n        return toArray(this.props.name);\n      }\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource() {\n      return this.source;\n    }\n  }, {\n    key: \"getDisabled\",\n    value: function getDisabled() {\n      return this.disabled;\n    }\n  }, {\n    key: \"setSource\",\n    value: function setSource(source) {\n      this.source = source;\n      this.reRender();\n    }\n  }, {\n    key: \"setVisible\",\n    value: function setVisible(visible) {\n      this.visible = visible;\n      this.reRender();\n    }\n  }, {\n    key: \"setDisabled\",\n    value: function setDisabled(disabled) {\n      this.disabled = disabled;\n      this.reRender();\n    }\n  }, {\n    key: \"getVisible\",\n    value: function getVisible() {\n      return this.visible;\n    }\n  }, {\n    key: \"getCollect\",\n    value: function getCollect() {\n      return this.collect;\n    }\n  }, {\n    key: \"reRender\",\n    value: function reRender() {\n      if (this.destroy) return;\n      this.forceUpdate();\n    }\n    /**\n     *\n     */\n\n  }, {\n    key: \"renderField\",\n    value: function renderField(ctx, fieldConfig, extraConf) {\n      var itemLayout = extraConf.itemLayout,\n          visible = extraConf.visible,\n          childrenContainer = extraConf.childrenContainer,\n          formItemProps = extraConf.formItemProps;\n      var children = formItemProps.children,\n          _formItemProps$valueP = formItemProps.valuePropName,\n          valuePropName = _formItemProps$valueP === void 0 ? 'value' : _formItemProps$valueP;\n      var wrapperCol = itemLayout.wrapperCol,\n          labelCol = itemLayout.labelCol;\n      var fieldElem;\n\n      if (children) {\n        if (React.isValidElement(children)) {\n          fieldElem = children;\n        } else {\n          // 配置型children\n          fieldElem = this.transChildrenToElems(ctx, children);\n\n          if (childrenContainer) {\n            var childrenContainerElem = triggerRenderPlugin(ctx, childrenContainer);\n            fieldElem = React.cloneElement(childrenContainerElem, {\n              children: fieldElem\n            });\n          }\n        }\n      } else {\n        fieldElem = triggerFieldPlugin(ctx, fieldConfig, valuePropName);\n      }\n\n      var fieldItemElem = /*#__PURE__*/React.createElement(FormItem, _extends({\n        labelCol: labelCol,\n        wrapperCol: wrapperCol\n      }, formItemProps), fieldElem);\n\n      if (needWrapCols(itemLayout.span)) {\n        return /*#__PURE__*/React.createElement(_Col, {\n          style: {\n            display: visible === false ? 'none' : ''\n          },\n          span: itemLayout.span,\n          offset: itemLayout.offset\n        }, fieldItemElem);\n      } else {\n        return React.cloneElement(fieldItemElem, {\n          style: assign({}, fieldItemElem.props.style, {\n            display: visible === false ? 'none' : ''\n          })\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          fieldProps = _this$props.field,\n          initialSource = _this$props.initialSource,\n          initialVisible = _this$props.initialVisible,\n          initialDisabled = _this$props.initialDisabled,\n          collect = _this$props.collect,\n          remoteSource = _this$props.remoteSource,\n          itemLayout = _this$props.itemLayout,\n          childrenContainer = _this$props.childrenContainer,\n          restProps = _objectWithoutProperties(_this$props, [\"field\", \"initialSource\", \"initialVisible\", \"initialDisabled\", \"collect\", \"remoteSource\", \"itemLayout\", \"childrenContainer\"]);\n\n      if (!this.inited) {\n        this.inited = true;\n        this.fieldName = getFieldName(this.props.name);\n        this.collect = collect !== false;\n        this.source = initialSource;\n        this.visible = initialVisible;\n        this.disabled = initialDisabled;\n      }\n\n      var formItemProps = restProps;\n\n      if (restProps.rules && restProps.rules.length) {\n        formItemProps.rules = restProps.rules.map(function (rule) {\n          if (rule.validator) {\n            return {\n              validator: function validator(_, value) {\n                var validatorCtx = getCtx({\n                  value: value,\n                  name: _this2.props.name\n                });\n                return triggerPlugin('validator', validatorCtx, rule.validator);\n              }\n            };\n          }\n\n          return rule;\n        });\n      }\n\n      var _this$context = this.context,\n          formContext = _this$context.formContext,\n          layout = _this$context.layout;\n\n      var _formContext$getInter = formContext.getInternalHooks(HOOK_MARK),\n          getCtx = _formContext$getInter.getCtx;\n\n      var ctx = getCtx({\n        disabled: this.disabled,\n        source: this.source\n      });\n      var extraConfig = {\n        layout: layout,\n        itemLayout: assignWithDefined({}, this.context.itemLayout, itemLayout),\n        visible: this.visible,\n        childrenContainer: childrenContainer,\n        formItemProps: formItemProps\n      };\n      var fieldNode = this.renderField(ctx, fieldProps, extraConfig);\n      return fieldNode;\n    }\n  }]);\n\n  return Field;\n}(React.Component);\n\nField.contextType = FieldGroupContext;\nexport { Field as default };\n\nfunction getFieldName(fieldName) {\n  return fieldName || uniqueId('fieldName_');\n}"]},"metadata":{},"sourceType":"module"}