{"ast":null,"code":"import \"antd/es/notification/style\";\nimport _notification from \"antd/es/notification\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nimport isUndefined from 'lodash/isUndefined'; // 1. 业务重定向\n\nvar bizRedirectHandler = function bizRedirectHandler(response) {\n  var data = response.data,\n      code = response.code;\n\n  if (Number(code) === 302 && data && data.redirectUrl) {\n    window.location.assign(data.redirectUrl);\n  }\n}; // 2. 开发级错误信息转换\n\n\nvar bizDevErrorAdapter = function bizDevErrorAdapter(response) {\n  var code = response.code,\n      success = response.success,\n      message = response.message,\n      description = response.description;\n  var opCode = Number(code);\n\n  if (success == false && opCode >= 300 && opCode !== 302) {\n    return {\n      message: message || \"\".concat(code),\n      description: description || message\n    };\n  }\n\n  return null;\n}; // 3. 用户级错误信息转换\n\n\nvar bizErrorMessageAdapter = function bizErrorMessageAdapter(response) {\n  var code = response.code,\n      success = response.success,\n      message = response.message;\n  var opCode = Number(code);\n\n  if (success === false && (opCode < 300 || opCode === 302)) {\n    // 错误信息只使用后端提供的\n    return message;\n  } // 成功\n\n\n  return null;\n}; // 4. 成功信息转换\n\n\nvar bizSuccessMessageAdapter = function bizSuccessMessageAdapter(response, successMessage) {\n  var success = response.success,\n      message = response.message; // 禁止显示\n\n  if (successMessage === false) {\n    return null;\n  }\n\n  if (success !== false) {\n    // 默认使用后端返回\n    if (successMessage === true) {\n      return message;\n    } else {\n      // 前端设置成功提示信息\n      return successMessage;\n    }\n  }\n\n  return null;\n}; // 5. 消息通知\n\n\nvar bizNotifyHandler = function bizNotifyHandler(notifyMessages) {\n  var successMessage = notifyMessages.successMessage,\n      errorMessage = notifyMessages.errorMessage,\n      errorDesc = notifyMessages.errorDesc;\n\n  if (successMessage) {\n    _message.success(successMessage);\n  } else if (errorMessage) {\n    _message.error(errorMessage);\n  } else if (errorDesc) {\n    _notification.error({\n      message: errorDesc.message,\n      description: errorDesc.description\n    });\n  }\n}; // 6. 业务数据转换\n\n\nvar bizDataAdapter = function bizDataAdapter(response) {\n  if (response && !isUndefined(response.data)) {\n    return response.data;\n  }\n\n  return response;\n};\n\nvar extendConfig = {\n  bizDataAdapter: bizDataAdapter,\n  bizDevErrorAdapter: bizDevErrorAdapter,\n  bizErrorMessageAdapter: bizErrorMessageAdapter,\n  bizSuccessMessageAdapter: bizSuccessMessageAdapter,\n  bizNotifyHandler: bizNotifyHandler,\n  bizRedirectHandler: bizRedirectHandler\n};\nexport default extendConfig;","map":{"version":3,"sources":["/Users/x/workspace/xz8la8/open-sula/sula-samples-cra/node_modules/_sula@1.0.0-beta.16@sula/es/action-plugin/request/defaultConfig.js"],"names":["_notification","_message","isUndefined","bizRedirectHandler","response","data","code","Number","redirectUrl","window","location","assign","bizDevErrorAdapter","success","message","description","opCode","concat","bizErrorMessageAdapter","bizSuccessMessageAdapter","successMessage","bizNotifyHandler","notifyMessages","errorMessage","errorDesc","error","bizDataAdapter","extendConfig"],"mappings":"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","sourcesContent":["import \"antd/es/notification/style\";\nimport _notification from \"antd/es/notification\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nimport isUndefined from 'lodash/isUndefined';\n\n// 1. 业务重定向\nvar bizRedirectHandler = function bizRedirectHandler(response) {\n  var data = response.data,\n      code = response.code;\n\n  if (Number(code) === 302 && data && data.redirectUrl) {\n    window.location.assign(data.redirectUrl);\n  }\n}; // 2. 开发级错误信息转换\n\n\nvar bizDevErrorAdapter = function bizDevErrorAdapter(response) {\n  var code = response.code,\n      success = response.success,\n      message = response.message,\n      description = response.description;\n  var opCode = Number(code);\n\n  if (success == false && opCode >= 300 && opCode !== 302) {\n    return {\n      message: message || \"\".concat(code),\n      description: description || message\n    };\n  }\n\n  return null;\n}; // 3. 用户级错误信息转换\n\n\nvar bizErrorMessageAdapter = function bizErrorMessageAdapter(response) {\n  var code = response.code,\n      success = response.success,\n      message = response.message;\n  var opCode = Number(code);\n\n  if (success === false && (opCode < 300 || opCode === 302)) {\n    // 错误信息只使用后端提供的\n    return message;\n  } // 成功\n\n\n  return null;\n}; // 4. 成功信息转换\n\n\nvar bizSuccessMessageAdapter = function bizSuccessMessageAdapter(response, successMessage) {\n  var success = response.success,\n      message = response.message; // 禁止显示\n\n  if (successMessage === false) {\n    return null;\n  }\n\n  if (success !== false) {\n    // 默认使用后端返回\n    if (successMessage === true) {\n      return message;\n    } else {\n      // 前端设置成功提示信息\n      return successMessage;\n    }\n  }\n\n  return null;\n}; // 5. 消息通知\n\n\nvar bizNotifyHandler = function bizNotifyHandler(notifyMessages) {\n  var successMessage = notifyMessages.successMessage,\n      errorMessage = notifyMessages.errorMessage,\n      errorDesc = notifyMessages.errorDesc;\n\n  if (successMessage) {\n    _message.success(successMessage);\n  } else if (errorMessage) {\n    _message.error(errorMessage);\n  } else if (errorDesc) {\n    _notification.error({\n      message: errorDesc.message,\n      description: errorDesc.description\n    });\n  }\n}; // 6. 业务数据转换\n\n\nvar bizDataAdapter = function bizDataAdapter(response) {\n  if (response && !isUndefined(response.data)) {\n    return response.data;\n  }\n\n  return response;\n};\n\nvar extendConfig = {\n  bizDataAdapter: bizDataAdapter,\n  bizDevErrorAdapter: bizDevErrorAdapter,\n  bizErrorMessageAdapter: bizErrorMessageAdapter,\n  bizSuccessMessageAdapter: bizSuccessMessageAdapter,\n  bizNotifyHandler: bizNotifyHandler,\n  bizRedirectHandler: bizRedirectHandler\n};\nexport default extendConfig;"]},"metadata":{},"sourceType":"module"}